import os
import smtplib
from email.message import EmailMessage

# Read uptime from /proc/uptime
with open('/proc/uptime', 'r') as f:
    uptime_seconds = float(f.readline().split()[0])
    uptime_days = int(uptime_seconds // 86400)

# Check if uptime exceeds 10 days
if uptime_days > 10:
    # Prepare email
    msg = EmailMessage()
    msg.set_content("Alert: Uptime exceeds 10 days")
    msg['Subject'] = "Uptime Alert"
    msg['From'] = "monitor@example.com"
    msg['To'] = "admin@example.com"

    # Send email (using localhost SMTP server)
    try:
        with smtplib.SMTP('localhost') as server:
            server.send_message(msg)
        print("Alert email sent.")
    except Exception as e:
        print(f"Failed to send email: {e}")
